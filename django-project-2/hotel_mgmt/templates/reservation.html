
{% extends 'index_view.html' %}
{% block pagecontent %}
{% load crispy_forms_tags %}
<div class="col-md-5">
<form action="" method="post" id="ReservationForm" data-name-url="{% url 'ajax_load_price' %}" novalidate>
    {% csrf_token %}
    {{ form|crispy}}
    <input type="submit" class="btn btn-success" value="Submit">
  </form>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script>
  	var ary = []
  	$(".form-check-input").change(function(){
	  if($(this).is(":checked")){
		ary.push(parseInt(this.value))
		}
	   else if($(this).is(":not(:checked)")){
		let index = ary.indexOf(parseInt(this.value));
		if (index > -1) { 
		   ary.splice(index, 1);
		 }
		}
	var url = $('#ReservationForm').attr("data-name-url");
	console.log(ary);
	$.ajax({
                url:url,
                data:{
                    'room':ary
                },
                success:function(data){
                    console.log(data);
                    $('#id_total_price').val(data['price']);
                }
            });
	});
  </script>
</div>
{% endblock pagecontent %}
